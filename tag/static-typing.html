<!-- blogPosts:text[] -->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html lang="en">
<head>
  <title>Michael's blog</title>
  <meta charset="utf-8">
  <link rel="stylesheet" type="text/css" href="../main.css">
  <link rel="stylesheet" type="text/css" href="../highlight/styles/solarized_dark.css">
  <script type="text/javascript"  src="../jquery.min.js"></script>
  <script type="text/javascript"  src="../main.js"></script>
  <script type="text/javascript"  src="../highlight/highlight.pack.js"></script>
  
</head>
<body>
  <div class="mainSection">
    <div id="navigation">
      <div id="gertruda">
	<a href="../index.html" class="stripHREF" id="symbol">
	</a>
	<div id="slogan">
	</div>
      </div>
      <div id="spacer"></div>	
      <!-- tag.name:string -->
<!-- tag.size:number -->
<!-- tagsList:tag[] -->
<!-- selectedTagSet:set<string> -->
<div class="tagContainer">
  
    
      
    		   
    
        <a class="tag smallTag stripHREF " href="Architecture.html" style="font-size:2.8vh;">Architecture</a>
    
  
    
      
    		   
    
        <a class="tag smallTag stripHREF " href="Contacts.html" style="font-size:2.8vh;">Contacts</a>
    
  
    
      
    		   
    
        <a class="tag smallTag stripHREF " href="DEPTA.html" style="font-size:2.8vh;">DEPTA</a>
    
  
    
      
    		   
    
        <a class="tag smallTag stripHREF " href="DataMining.html" style="font-size:2.8vh;">DataMining</a>
    
  
    
      
    		   
    
        <a class="tag smallTag stripHREF " href="GoLang.html" style="font-size:2.8vh;">GoLang</a>
    
  
    
      
    		   
    
        <a class="tag smallTag stripHREF " href="Hello.html" style="font-size:2.8vh;">Hello</a>
    
  
    
      
    		   
    
        <a class="tag smallTag stripHREF " href="TypeScript.html" style="font-size:2.8vh;">TypeScript</a>
    
  
    
      
    		   
    
        <a class="tag smallTag stripHREF " href="debian.html" style="font-size:3.9vh;">debian</a>
    
  
    
      
    		   
    
        <a class="tag smallTag stripHREF " href="flask.html" style="font-size:2.8vh;">flask</a>
    
  
    
      		   
    		   
    
        <a class="tag bigTag stripHREF " href="hour-of-coding.html" style="font-size:5vh;">hour-of-coding</a>
    
  
    
      
    		   
    
        <a class="tag smallTag stripHREF " href="immutable.js.html" style="font-size:2.8vh;">immutable.js</a>
    
  
    
      
    		   
    
        <a class="tag smallTag stripHREF " href="jinja2.html" style="font-size:2.8vh;">jinja2</a>
    
  
    
      
    		   
    
        <a class="tag smallTag stripHREF " href="nameConvention.html" style="font-size:2.8vh;">nameConvention</a>
    
  
    
      
    		   
    
        <a class="tag smallTag stripHREF " href="play-video.html" style="font-size:2.8vh;">play-video</a>
    
  
    
      		   
    		   
    
        <a class="tag bigTag stripHREF " href="python.html" style="font-size:6.1vh;">python</a>
    
  
    
      
    		   
    
        <a class="tag smallTag stripHREF " href="scraping.html" style="font-size:2.8vh;">scraping</a>
    
  
    
      
    		   
    
        <a aclass="tag tag__selected stripHREF smallTag" href="static-typing.html" style="font-size:2.8vh;">static-typing</a>
    
  
    
      		   
    		   
    
        <a class="tag bigTag stripHREF " href="tutorial.html" style="font-size:7.2vh;">tutorial</a>
    
  
    
      
    		   
    
        <a class="tag smallTag stripHREF " href="typescript.html" style="font-size:2.8vh;">typescript</a>
    
  
</div>    

    </div>
    <div id="content">
      <!-- <h3>Hello I am Michael. I write stuff and play piano</h3> -->
      
  
    <!-- text:string -->
    <div class="blogPost">
      <div class="header">
        <span class="content__halfLineLeft"></span>
        <a href="../post/1016805251.html" class="content__Symbol stripHREF">&infin;</a>
        <span class="content__halfLineRight"></span>
       	<div class="blogPostTags">
       	  
            
              <span class="tagInLine__selected stripHREF" href="/tag/static-typing">static-typing</span>
              
       	  
       	</div>
	<div class="dateElement">
	  2015.03.15
	</div>
      </div>
      <div class="postContent buttonFinder">
        <h2 id="why-typescript">Why typescript</h2>
<p>Recently, I changed my main  work environment in  browser from <em>coffeescript</em> to <em>typescript</em>.
Here I am to tell why. And about my  work environment.</p>
<h4 id="coffee-advatages-over-typescript">Coffee advatages over typescript</h4>
<ul>
<li>Lots of syntax sugar (Code in coffeescript is generally 30% shorter than typescript)</li>
<li>Indentation based folding</li>
<li>... That&#39;s it</li>
</ul>
<h4 id="typescript-advantages-over-coffee">Typescript advantages over Coffee</h4>
<ul>
<li>Clear output. Principle is  simple. Just strip typedeclarations and you Do get clean javascript</li>
<li>They intend to support es6(Coffeescript just does not bother about it)</li>
<li>Tooling</li>
<li>Module system (it is also a great disadvantage, see below)</li>
<li>Typesystem. nuff said</li>
</ul>
<h3 id="library-support">Library support</h3>
<p><a href="https://github.com/borisyankov/DefinitelyTyped">DefinitelyTyped</a> is a very good repository for many js libraries.
And if You do not have particular library there, you can just write it yourself.
As I have written it for <a href="http://complete-ly.appspot.com/">completely</a> just in <em>5</em> minutes.</p>
<pre><code>// Type definitions for complete.ly
// Project: http://complete-ly.appspot.com/
// Definitions by: VbifRkbvjd &lt;https://github.com/VbifRkbvjd&gt;
// Definitions: https://github.com/borisyankov/DefinitelyTyped
declare module completelyInterfaces {
    interface ICompletely {
        (el:HTMLElement,style?:any):IcompletelyInstance
    }
    interface IcompletelyInstance {
        options:string[]
        startFrom:number
        setText(data:string):void
        getText():string
        onChange:(data:string)=&gt;void
        repaint():void
        hideDropDown():void
        wrapper:HTMLElement
        prompt:HTMLElement
        input:HTMLInputElement
        hint:HTMLInputElement
        dropDown:HTMLElement
    }
}
declare var completely: completelyInterfaces.ICompletel
</code></pre><p>You see that this is pretty straightforward. And, sometimes, might work as library documentation too.</p>
<h4 id="my-work-environment-regarding-typescript-">My work environment regarding typescript.</h4>
<p>It is strange to not to use IDE capabilities in a static typed language.
IDE like support in emacs is quite good via <a href="https://github.com/aki2o/emacs-tss">emacs-tss</a>. But it has two  disadvantages.</p>
<ol>
<li>flymake is deprecated (and checking is done via it).</li>
<li>As a consequence of 1. any large enough file hangs</li>
</ol>
<p>I tried to remove flymake from emacs-tss, and replace it with flycheck.
But it seems that emacs-tss is heavily depend on flymake, and doing so will require major refactoring of this mode.</p>
<p>So I decided to switch from <em>emacs</em> to <em>Intellij Idea</em>. It has quite good support for typescript. But it also has <em>two disadvantages</em></p>
<ol>
<li>Program correctness checking is weird.<ul>
<li>It, sometimes, show error, when compiler compiles</li>
<li>It, sometimes, does not show error, although compiler points that error.</li>
</ul>
</li>
<li>IDEA  hangs on React. Whenever  you type <em>React</em> in your <em>ts</em> file, IDEA  hangs, until you remove <em>React</em> from your file.</li>
</ol>
<h4 id="what-i-dislike-about-typescript">What I dislike about typescript</h4>
<p>The one thing, that is <em>definitely wrong</em> in typescript is <em>module system</em>.</p>
<p>There are two concepts:</p>
<ul>
<li>Internal modules</li>
<li>External modules</li>
</ul>
<p>The difference between them is that <em>external  modules</em> are about to work with <em>require.js</em> or <em>browserify</em>,
when <em>internal modules</em> are about to glue your js files into one.
You cannot use internal and external modules  at the same time.
And there are more intricate delicacies, like, you cannot glue module from different files if you use external system. And You can if you use internal.
So, for this I was going to kill someone, untill I made a hack solution</p>
<h4 id="hack-solution">Hack solution</h4>
<p>Here is the schema I came, when I bump my head enough.
Assume that I am working  in <em>node-webkit</em>. So here it is:</p>
<ul>
<li>Dependencies:   <em>deps.js</em></li>
<li>Compiler-ouput(one file compiled with internal module system):                    <em>SomeSystemGlued.js</em></li>
</ul>
<p>And <em>deps.js</em> contain something like:</p>
<pre><code>window.Q = require(&quot;q&quot;)
window.R = React // because of &quot;love&quot; idea has to React(hangs)
window.NWGUI = require(&quot;nw.gui&quot;)
window._     = require(&quot;lodash&quot;)
window.path  = require(&quot;path&quot;)
window.fs    = require(&quot;fs-extra&quot;)
// e.t.c
</code></pre><p>And then, every subsystem just use these from related <em>d.ts</em> files. As they are just  globals.</p>

      </div>
      <a class="openMore__button" href="../post/1016805251.html">&dArr;</a>
    </div>
    

    </div>
  </div>    
</body>
</html>
